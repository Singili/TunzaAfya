<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Afya Asilia - Natural Wellness</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="tailwind.js"></script>
  <style>
    /* Product cards: fixed height box, fill the box while keeping aspect and center the crop */
    .product-img {
      width: 100%;
      height: fit-content;
      display: block;
      object-fit: cover;
      object-position: center;
      background-color: #f8fafc; /* light neutral bg in case of transparent images */
    }

    /* Inline circular logo in the header */
    .header-logo img {
      width: 100%;
      height: 100%;
      display: block;
      object-fit: cover;
      object-position: center;
      border-radius: 9999px;
    }

    /* Two-line clamp for product descriptions in cards */
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    /* Modal description scroll behavior */
    #modalDesc {
      max-height: 40vh;
      overflow: auto;
    }

  .glass { background: rgba(255,255,255,0.85); -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px); }
    #waFloat { position: fixed; bottom: 20px; right: 20px; z-index: 9999; }
    /* Top auto-scroll advertisements */
    #topAds { border-bottom: 1px solid rgba(0,0,0,0.06); }
    /* Fixed header and topAds support (styles applied when JS enables fixed mode) */
    #siteHeader { left: 0; right: 0; }
    #siteHeader.site-fixed { position: fixed; top: 0; left: 0; right: 0; z-index: 10000; }
    #topAds.top-fixed { position: fixed; left: 0; right: 0; z-index: 9999; box-shadow: 0 1px 6px rgba(2,6,23,0.08); }
    #topAds .w-24 { width: 96px; height: 96px; }
    #topAdImg { transition: opacity .35s ease; display: block; }
    #topAds .top-ad-hidden { opacity: 0; }
    #topAds .top-ad-visible { opacity: 1; }
    @media (max-width: 640px) {
      #topAds .w-24 { width: 72px; height: 72px; }
      #topAds { padding-top: .5rem; padding-bottom: .5rem; }
      #topAds .line-clamp-2 { -webkit-line-clamp: 2; }
    }

    /* Dark / Light theme overrides (basic) */
    body.dark { background-color: #0b1220; color: #e6eef8; }
    body.dark header { background-color: #064e3b !important; }
    body.dark .bg-white { background-color: #0f1724 !important; }
    body.dark .text-gray-700, body.dark .text-gray-600, body.dark .text-gray-800 { color: #cbd5e1 !important; }
    body.dark .border { border-color: rgba(255,255,255,0.06) !important; }
    body.dark .glass { background: rgba(2,6,23,0.6) !important; color: #e6eef8 !important; }
    body.dark .product-img { background-color: #071127 !important; }
    body.dark a, body.dark p, body.dark span, body.dark h1, body.dark h2, body.dark h3, body.dark h4 { color: #e6eef8 !important; }
    /* Ensure modal looks good in dark mode */
    body.dark #productModal .bg-white { background: #071127 !important; }
    /* Combined logo (behave like one image) */
    .combined-logo { display: flex; gap: 0; align-items: stretch; justify-content: stretch; overflow: hidden; border-radius: 0.5rem; cursor: pointer; }
    .combined-logo > .half { flex: 1 1 50%; display:flex; align-items:center; justify-content:center; padding: 1rem; background: transparent; }
    .combined-logo img { max-width: 92%; height: auto; object-fit: contain; display:block; }
    .combined-logo:focus, .combined-logo:hover { box-shadow: 0 6px 18px rgba(2,6,23,0.12); transform: translateY(-1px); }
    @media (max-width:420px){ .combined-logo img{ max-width:80%; } .combined-logo > .half{ padding: .75rem; } }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">
  <!-- Nav -->
  <header id="siteHeader" class="bg-green-700 text-white">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between relative">
      <div class="flex items-center gap-3">
  <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-green-700 font-bold header-logo"><img src="images/logo.webp" alt="Afya Asilia logo"></div>
        <div>
          <h1 id="siteTitle" class="text-lg font-semibold">Afya Asilia</h1>
          <p id="siteTag" class="text-xs opacity-90">Natural wellness • Authentic Eternal International products</p>
        </div>
      </div>
      <!-- Desktop nav (hidden on small screens) -->
      <nav class="hidden md:flex gap-6 items-center text-sm">
        <a id="navAbout" href="#about-us" class="hover:underline">About</a>
        <a id="navWhat" href="#what-we-do" class="hover:underline">What we do</a>
        <a id="navProducts" href="#products" class="hover:underline">Products</a>
        <a id="navContact" href="#contact" class="hover:underline">Contact</a>
      </nav>
      <!-- Mobile menu button (visible on small screens) -->
      <div class="md:hidden flex items-center">
        <button id="menuBtn" aria-controls="mobileNav" aria-expanded="false" class="inline-flex items-center justify-center p-2 rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-white" title="Open menu">
          <!-- Hamburger icon -->
          <svg id="menuIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
          <!-- Close icon (hidden by default) -->
          <svg id="closeIcon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
      </div>
      <!-- Mobile nav (hidden by default) -->
      <div id="mobileNav" class="md:hidden hidden absolute right-4 top-full mt-2 w-56 bg-green-700 text-white rounded-md shadow-lg z-40 overflow-hidden">
        <div class="flex flex-col py-2">
          <a id="mobileAbout" href="#about-us" class="px-4 py-2 hover:bg-green-600">About</a>
          <a id="mobileWhat" href="#what-we-do" class="px-4 py-2 hover:bg-green-600">What we do</a>
          <a id="mobileProducts" href="#products" class="px-4 py-2 hover:bg-green-600">Products</a>
          <a id="mobileContact" href="#contact" class="px-4 py-2 hover:bg-green-600">Contact</a>
        </div>
      </div>
      <div class="flex items-center gap-2">
  <select id="langSwitcher" class="px-2 py-1 rounded-md border bg-white text-green-700" title="Choose language">
          <option value="en">English</option>
          <option value="sw" selected>Swahili</option>
        </select>
        <!-- Theme toggle -->
        <label for="themeToggle" class="ml-2 inline-flex items-center gap-2 cursor-pointer text-sm text-white">
          <input id="themeToggle" type="checkbox" class="hidden" />
          <span id="themeToggleVisual" class="w-10 h-6 bg-gray-200 rounded-full relative inline-block transition-all" style="background:#fff">
            <span class="absolute left-1 top-1 w-4 h-4 bg-green-700 rounded-full transition-transform" style="transform: translateX(0);"></span>
          </span>
          <span id="themeToggleLabel" class="ml-2 text-xs text-white">Light</span>
        </label>
        <a id="headerOrderBtn" href="https://api.whatsapp.com/send?phone=255692538955&text=Hello,%20I%20want%20to%20order%20from%20Afya%20Asilia" class="ml-3 inline-flex items-center gap-2 bg-white text-green-700 px-3 py-2 rounded-md text-sm font-medium">Order on WhatsApp</a>
      </div>
    </div>
  </header>

  <!-- Top auto-scroll advertisements -->
  <section id="topAds" class="bg-white">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-4">
      <div id="topAdContent" class="flex-1 flex items-center gap-4">
        <div id="topAdImgWrap" class="w-24 h-24 flex-shrink-0 overflow-hidden rounded-md bg-gray-100">
          <img id="topAdImg" src="" alt="" class="w-full h-full object-cover" />
        </div>
        <div id="topAdText" class="flex-1">
          <div id="topAdTitle" class="font-semibold text-green-800">Featured</div>
          <div id="topAdDesc" class="text-sm text-gray-600 mt-1 line-clamp-2"></div>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button id="topAdPrev" class="px-2 py-1 rounded bg-gray-100 hover:bg-gray-200">‹</button>
        <button id="topAdNext" class="px-2 py-1 rounded bg-gray-100 hover:bg-gray-200">›</button>
      </div>
    </div>
  </section>

  <!-- Hero -->
  <section class="max-w-6xl mx-auto px-4 py-8 grid md:grid-cols-2 gap-8 items-center">
    <div class="space-y-4">
      <h2 id="heroTitle" class="text-3xl font-extrabold text-green-800">Welcome to Afya Asilia</h2>
      <p id="heroDesc" class="text-gray-700">Authentic herbal supplements from Eternal International. Discover natural solutions for weight management, detoxification, immunity support and everyday wellbeing.</p>
      <div class="flex gap-3">
        <a href="#products" class="bg-green-700 text-white px-4 py-2 rounded-md shadow" id="shopBtn">Shop Products</a>
        <a href="#contact" class="border border-green-700 text-green-700 px-4 py-2 rounded-md" id="contactBtn">Contact Us</a>
      </div>
    </div>
    <div class="rounded-lg overflow-hidden shadow-lg bg-white p-0">
      <a href="#products" class="combined-logo h-56 md:h-64" role="img" aria-label="Afya Asilia and Eternal International partnership">
        <div class="half" aria-hidden="false">
          <img src="images/logo.webp" alt="Afya Asilia" />
        </div>
        <div class="half" aria-hidden="false">
          <img src="images/eternal-logo.png" alt="Eternal International" />
        </div>
      </a>
    </div>
  </section>

  <!-- About -->
  <section id="about-us" class="max-w-6xl mx-auto px-4 py-6">
    <div class="glass p-6 rounded-lg shadow-sm">
      <h3 id="aboutTitle" class="text-2xl font-semibold text-green-800">About Afya Asilia</h3>
      <p id="aboutDesc" class="mt-3 text-gray-700">Afya Asilia is a trusted online platform dedicated to promoting natural wellness, healthy living, and high-quality nutritional supplements. We believe that true health begins with nature, and our mission is to help individuals transform their lives through safe, effective, and science-supported wellness products.

As an authorized <b></b>Eternal International </b> sales partner, we provide reliable access to premium herbal products designed to support weight loss, detoxification, immune health, energy balance, and overall body wellness. Our goal is to empower families and communities with natural solutions that improve daily health and long-term wellbeing.

At Afya Asilia, we are committed to transparency, customer satisfaction, and honest guidance. We ensure that every customer receives genuine products, correct usage instructions, and ongoing support on their wellness journey. Your health is our priority.</p>
    </div>
  </section>

  <!-- What we do -->
  <section id="what-we-do" class="max-w-6xl mx-auto px-4 py-6">
    <div class="grid md:grid-cols-3 gap-6">
      <div class="p-5 bg-white rounded-lg shadow">
        <h4 id="what1Title" class="font-semibold text-green-700">Supply Authentic Products</h4>
        <p id="what1Desc" class="mt-2 text-sm text-gray-600">We source original Eternal International supplements and ensure product authenticity and correct handling.</p>
      </div>
      <div class="p-5 bg-white rounded-lg shadow">
        <h4 id="what2Title" class="font-semibold text-green-700">Personalized Guidance</h4>
        <p id="what2Desc" class="mt-2 text-sm text-gray-600">Every body is different. We help customers choose the right products based on their goals—whether they want to lose weight, burn belly fat, detox, increase energy, or improve overall wellbeing.</p>
      </div>
      <div class="p-5 bg-white rounded-lg shadow">
        <h4 id="what3Title" class="font-semibold text-green-700">Fast Delivery & Support</h4>
        <p id="what3Desc" class="mt-2 text-sm text-gray-600">Local delivery, nationwide shipping options, and after-sale support to track progress and answer questions.</p>
      </div>
    </div>
  </section>

  <!-- Products with search & filters -->
  <section id="products" class="max-w-6xl mx-auto px-4 py-8">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
      <h3 class="text-2xl font-semibold text-green-800" id="productsTitle">Our Products</h3>
      <div class="flex gap-3 w-full md:w-auto">
  <input id="searchInput" type="search" placeholder="Search products, categories, descriptions..." class="flex-1 md:flex-none px-3 py-2 rounded-md border bg-white text-gray-800 placeholder-gray-500 shadow-sm border-green-300 focus:outline-none focus:ring-2 focus:ring-green-200 focus:border-green-600" />
  <select id="categoryFilter" class="px-3 py-2 rounded-md border" title="Filter by category">
          <option value="all">All Categories</option>
          <option value="weight loss">Weight Loss</option>
          <option value="detox">Detox</option>
          <option value="immunity">Immunity</option>
          <option value="energy">Energy</option>
        </select>
      </div>
    </div>                                                      

    <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6"></div>
  </section>

  <!-- Contact -->
  <section id="contact" class="max-w-6xl mx-auto px-4 py-8">
    <div class="grid md:grid-cols-2 gap-6">
      <div class="p-6 bg-white rounded-lg shadow">
        <h4 class="text-xl font-semibold text-green-800" id="contactTitle">Get in touch / Order</h4>
        <p id="contactDesc" class="mt-2 text-gray-600">Fill the form or use WhatsApp to place your order. We'll reply within a few hours.</p>
        <form id="contactForm" class="mt-4 space-y-3">
          <input required name="name" placeholder="Your name" class="w-full px-3 py-2 rounded-md border" />
          <input required name="phone" placeholder="Phone (e.g. +255...)" class="w-full px-3 py-2 rounded-md border" />
          <input name="email" placeholder="Email (optional)" class="w-full px-3 py-2 rounded-md border" />
          <textarea name="message" placeholder="Message / Order details" class="w-full px-3 py-2 rounded-md border" rows="4"></textarea>
          <div class="flex gap-3">
            <button type="submit" class="bg-green-700 text-white px-4 py-2 rounded-md">Send Message</button>
            <a id="waQuick" href="https://api.whatsapp.com/send?phone=255692538955&text=Hello,%20I%20want%20to%20order%20from%20Afya%20Asilia" class="inline-flex items-center gap-2 border border-green-700 text-green-700 px-4 py-2 rounded-md">Quick WhatsApp</a>
          </div>
        </form>
        <p id="formStatus" class="mt-3 text-sm text-gray-600"></p>
      </div>

      <div class="p-6 bg-gradient-to-br from-green-50 to-white rounded-lg shadow">
        <h4 id="locationTitle" class="text-xl font-semibold text-green-800">Our Location & Hours</h4>
        <p id="locationDesc" class="mt-2 text-gray-600">Based in Tanzania / East Africa. Local delivery available. For shipping outside local area, contact us on WhatsApp.</p>
        <div class="mt-4">
          <p id="openHours" class="text-sm text-gray-600">Open: Mon–Sun • 24 hrs</p>
          <p id="locationPhone" class="text-sm text-gray-600">Phone/WhatsApp: +255 692 538 955</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-green-700 text-white mt-8">
    <div class="max-w-6xl mx-auto px-4 py-6 flex flex-col md:flex-row justify-between items-start md:items-center text-sm gap-4 md:gap-0">
      <div>
        <h5 id="footerContactTitle" class="font-semibold">Contact Us</h5>
        <p id="footerPhone">Phone/WhatsApp: +255 692 538 955</p>
        <p id="footerEmail">Email: afyaasilia@gmail.com</p>
        <p id="footerFacebook"><a href="https://web.facebook.com/profile.php?id=61583949610077" class="underline">Facebook: Afya Asilia</a></p>
        <p id="footerInstagram"><a href="#" class="underline">Instagram: afya_asilia</a></p>
      </div>
      <div>
        <h5 id="footerLocationTitle" class="font-semibold">Location</h5>
        <p id="footerLocationText">Tanzania, East Africa</p>
      </div>
      <div>
        <p id="footerCopyright">© Afya Asilia — Authorized Eternal International Partner</p>
      </div>
    </div>
  </footer>

  <!-- WhatsApp floating button -->
  <a id="waFloat" href="https://api.whatsapp.com/send?phone=255692538955&text=Hello,%20I%20want%20to%20order%20from%20Afya%20Asilia" target="_blank" rel="noopener noreferrer"><img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" class="w-12 h-12" /></a>

  <!-- Product details modal -->
  <div id="productModal" class="hidden fixed inset-0 z-50 flex items-center justify-center">
    <div class="absolute inset-0 bg-black bg-opacity-50" onclick="closeProductModal()"></div>
    <div class="bg-white rounded-lg shadow-lg max-w-lg w-full z-10 overflow-hidden">
      <div class="p-4 flex justify-between items-start">
        <h4 id="modalTitle" class="font-semibold text-green-800"></h4>
        <button onclick="closeProductModal()" aria-label="Close" class="text-gray-500 text-2xl leading-none">&times;</button>
      </div>
      <img id="modalImg" src="" alt="" class="w-full h-64 object-cover"/>
      <div class="p-4">
        <p id="modalPrice" class="font-medium text-gray-700"></p>
        <!-- Make the description area scrollable when content is long -->
  <p id="modalDesc" class="mt-2 text-gray-600"></p>
        <div class="mt-4 flex gap-2">
          <a id="modalOrder" href="#" class="flex-1 inline-block text-center px-3 py-2 border rounded-md">Order on WhatsApp</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    function showProductDetails(id) {
      const p = products.find(x => x.id === id);
      if (!p) return;
      document.getElementById('modalTitle').textContent = p.name;
      const img = document.getElementById('modalImg');
      img.src = p.img;
      img.alt = p.name;
  document.getElementById('modalPrice').textContent = p.price;
  // Format modal description: bold headings and put each section on its own line
  const rawDesc = getProductDesc(p) || '';
  const lang = getCurrentLang();
  const modalDescEl = document.getElementById('modalDesc');
  let descHtml = '';
  if(modalDescEl){
    if(lang === 'sw'){
      const headingA = 'Inafanya nini:';
      const headingB = 'Kwa nani:';
      if(rawDesc.includes(headingB)){
        const parts = rawDesc.split(headingB);
        const aPart = parts[0].replace(headingA, '').trim();
        const bPart = parts.slice(1).join(headingB).trim();
        descHtml = `<p><strong>${headingA}</strong> ${escapeHtml(aPart)}</p><p><strong>${headingB}</strong> ${escapeHtml(bPart)}</p>`;
      } else if(rawDesc.includes(headingA)){
        const aPart = rawDesc.replace(headingA, '').trim();
        descHtml = `<p><strong>${headingA}</strong> ${escapeHtml(aPart)}</p>`;
      } else {
        descHtml = `<p>${escapeHtml(rawDesc).replace(/\n/g,'<br>')}</p>`;
      }
    } else {
      const headingA = 'What it does:';
      const headingB = 'Who it is for:';
      if(rawDesc.includes(headingB)){
        const parts = rawDesc.split(headingB);
        const aPart = parts[0].replace(headingA, '').trim();
        const bPart = parts.slice(1).join(headingB).trim();
        descHtml = `<p><strong>${headingA}</strong> ${escapeHtml(aPart)}</p><p><strong>${headingB}</strong> ${escapeHtml(bPart)}</p>`;
      } else if(rawDesc.includes(headingA)){
        const aPart = rawDesc.replace(headingA, '').trim();
        descHtml = `<p><strong>${headingA}</strong> ${escapeHtml(aPart)}</p>`;
      } else {
        descHtml = `<p>${escapeHtml(rawDesc).replace(/\n/g,'<br>')}</p>`;
      }
    }
    modalDescEl.innerHTML = descHtml;
  }
  const modalOrder = document.getElementById('modalOrder');
  if(modalOrder){
    modalOrder.href = 'https://api.whatsapp.com/send?phone=255692538955&text=' + encodeURIComponent(getWhatsAppPrefill(p));
    // Localize modal order button label
    modalOrder.textContent = (getCurrentLang() === 'sw') ? 'Agiza kwenye WhatsApp' : 'Order on WhatsApp';
  }
      document.getElementById('productModal').classList.remove('hidden');
    }

    function closeProductModal() {
      document.getElementById('productModal').classList.add('hidden');
    }
    
    // Return currently selected language ('en' or 'sw')
    function getCurrentLang() {
      const el = document.getElementById('langSwitcher');
      return (el && el.value) ? el.value : 'en';
    }

    // Minimal HTML escaper for safe insertion into modal
    function escapeHtml(str){
      return String(str || '').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');
    }

    // Return the product description matching the current language (fallback to the other)
    function getProductDesc(p) {
      const lang = getCurrentLang();
      if (lang === 'sw') return p.desc_sw || p.desc_en || '';
      return p.desc_en || p.desc_sw || '';
    }

    // Return a localized WhatsApp prefill message for a product
    function getWhatsAppPrefill(p) {
      const lang = getCurrentLang();
      if (lang === 'sw') return `Ninataka kununua ${p.name}`; // "I want to buy <product>"
      return `I'm interested in ${p.name}`;
    }
  const products = [
  { id: 1, name: 'Chrysanthemum Tea', category: 'weight loss', price: 'Tsh 65,000', desc_en: 'What it does: Helps support fat metabolism, improve digestion, and assist toxin elimination. Who it is for: People seeking safe weight loss and better digestion.', desc_sw: 'Inafanya nini: Husaidia kuchochea mmeng`enyo wa mafuta, kuboresha mmeng`enyo wa chakula, na kusaidia kuondoa sumu mwilini. Kwa nani: Watu wanaotaka kupunguza uzito, unene au kitambi kwa njia salama na kuboresha mmeng`enyo.', img: 'images/chrysanthemum-tea.jpg' },

    { id: 2, name: 'Purslane Tea', category: 'tea', price: 'Tsh 65,000', desc_en: 'What it does: Supports blood cleansing, helps balance blood sugar and soothes the liver and lungs. Who it is for: People with liver or lung stress, hardworking adults, the elderly, and children.', desc_sw: 'Inafanya nini: Inasaidia kusafisha damu, kupunguza sukari na sumu, na kutuliza ini na mapafu. Kwa nani: Watu wenye msongo wa ini au mapafu, watu wanaofanya kazi ngumu, wazee, na watoto.', img: 'images/purselate-tea.jpg' },

  { id: 3, name: 'Antilipemic Tea', category: 'tea', price: 'Tsh 65,000', desc_en: 'What it does: Helps regulate body fat, support circulation and improve digestion. Who it is for: People wanting to reduce excess fat, support heart health, and increase energy.', desc_sw: 'Inafanya nini: Husaidia kurekebisha kiwango cha mafuta mwilini, kuunga mkono mzunguko wa damu na kuboresha mmeng enyo. Kwa nani: Watu wanaotaka kupunguza mafuta ya ziada, kuunga mkono afya ya moyo, na kuongeza nishati.', img: 'images/antilipemic-tea.jpg' },
  { id: 4, name: 'Middle Aged', category: 'energy', price: 'Tsh 110,000', desc_en: 'What it does: Provides essential vitamins and minerals to support energy, immunity and skin health. Who it is for: Adults needing nutritional support, especially those with low energy or poor diet.', desc_sw: 'Inafanya nini: Inatoa vitamini na madini muhimu kusaidia nishati, kinga na afya ya ngozi. Kwa nani: Watu wazima wanaohitaji msaada wa lishe, hasa wenye nishati ndogo au ulaji duni.', img: 'images/middle-aged.jpg' },

    { id: 5, name: 'Propolis Soft Capsule', category: 'weight loss', price: 'Tsh95,000', desc_en: 'What it does: Rich propolis supplement that supports immune health and helps tissue repair. Who it is for: People with low immunity, those recovering from illness, and anyone needing general immune support.', desc_sw: 'Inafanya nini: Lishe ya propolis yenye nguvu inayounga mkono afya ya kinga na kusaidia uponyaji wa tishu. Kwa nani: Watu wenye kinga dhaifu, wanaorejea kutoka kwa ugonjwa, na yeyote anayetaka msaada wa kinga.', img: 'images/propolis-soft-cap.jpg' },

    { id: 6, name: 'Calcium And Protein Powder', category: 'detox', price: 'Tsh 65,000', desc_en: 'What it does: Provides protein and calcium to support muscle, bone and overall nutrition. Who it is for: Pregnant and nursing mothers, children, older adults, and people needing extra protein.', desc_sw: 'Inafanya nini: Inatoa protini na kalsiamu kusaidia misuli, mifupa na lishe kwa ujumla. Kwa nani: Akina mama wajawazito na wanaonyonyesha, watoto, wazee, na watu wanaohitaji protini zaidi.', img: 'images/Calcium&Protein-powder.jpg' },
     { id: 7, name: 'Shuang Tiao Shun Zhi Electuary', category: 'detox', price: 'Tsh 195,000', desc_en: 'What it does: Helps remove digestive toxins and supports bowel regularity. Who it is for: People with digestive discomfort, constipation, or those seeking gentle detox support.', desc_sw: 'Inafanya nini: Inasaidia kuondoa sumu kwenye mfumo wa chakula na kusaidia kupata choo kwa kawaida. Kwa nani: Watu wenye matatizo ya mmeng enyo, kukosa choo, au wanaotaka msaada wa kusafisha mwili kwa upole.', img: 'images/shuang.png' },

    { id: 8, name: 'Gyrophora Tea', category: 'detox', price: 'Tsh 79,000', desc_en: 'What it does: Boosts energy, supports immunity and reduces physical fatigue. Who it is for: People with low immunity, chronic conditions, or anyone needing sustained energy.', desc_sw: 'Inafanya nini: Inakuza nishati, inasaidia kinga na kupunguza uchovu wa mwili. Kwa nani: Watu wenye kinga dhaifu, wagonjwa wa muda mrefu, au yeyote anayetaka nishati ya kudumu.', img: 'images/gyrophora-tea.jpg' },

    { id: 9, name: 'Aloe Capsule Soft Capsule', category: 'detox', price: 'Tsh 110,000', desc_en: 'What it does: Supports digestion, skin health and general immunity. Who it is for: People needing better digestion, improved skin appearance or immune support.', desc_sw: 'Inafanya nini: Inasaidia mmeng enyo, afya ya ngozi na kinga kwa ujumla. Kwa nani: Watu wanaohitaji mmeng enyo bora, ngozi bora au msaada wa kinga.', img: 'images/aloe-cap.jpg' },

   { id: 10, name: 'Fish Oil (Omega-3)', category: 'immunity', price: 'Tsh 85,000', desc_en: 'What it does: Provides omega-3 fatty acids to support heart, brain and joint health. Who it is for: Adults looking to improve cardiovascular health, focus and reduce inflammation.', desc_sw: 'Inafanya nini: Inatoa mafuta ya omega-3 kusaidia moyo, ubongo na viungo. Kwa nani: Watu wazima wanaotaka kuimarisha afya ya moyo, mwelekeo wa akili na kupunguza uvimbe.', img: 'images/fish-oil.jpg' },

   { id: 11, name: 'Folic Acid', category: 'immunity', price: 'Tsh 45,000', desc_en: 'What it does: Supports red blood cell formation and prenatal health. Who it is for: Pregnant women, people with folate deficiency, and those planning pregnancy.', desc_sw: 'Inafanya nini: Inasaidia utengenezaji wa seli nyekundu za damu na afya ya ujauzito. Kwa nani: Wanawake wajawazito, watu wenye upungufu wa folate, na wale wanaopanga ujauzito.', img: 'images/folic-acid.jpg' },

   { id: 12, name: 'Gingko Tea', category: 'energy', price: 'Tsh 72,000', desc_en: 'What it does: Supports circulation and mental sharpness. Who it is for: People experiencing poor concentration, memory lapses or low circulation.', desc_sw: 'Inafanya nini: Inasaidia mzunguko wa damu na umakini wa akili. Kwa nani: Watu wenye shida za umakini, kukosa kumbukumbu au mzunguko duni.', img: 'images/gingko-tea.jpg' },

   { id: 13, name: 'Lecithin Capsule', category: 'detox', price: 'Tsh 75,000', desc_en: 'What it does: Supports liver function and helps metabolize fats. Who it is for: People aiming to support liver health and lipid balance.', desc_sw: 'Inafanya nini: Inasaidia kazi ya ini na kusaidia mmeng enyo wa mafuta. Kwa nani: Watu wanaolenga kuunga mkono afya ya ini na uwiano wa mafuta.', img: 'images/licithin-cap.jpg' },

   { id: 14, name: 'Melatonin', category: 'energy', price: 'Tsh 60,000', desc_en: 'What it does: Helps regulate sleep cycles and support restful sleep. Who it is for: People with sleep disturbances, shift workers, or jet lag.', desc_sw: 'Inafanya nini: Inasaidia kudhibiti mzunguko wa usingizi na kusaidia usingizi wa kutosha. Kwa nani: Watu wenye matatizo ya usingizi, wafanyakazi wa zamu, au wenye jet lag.', img: 'images/melatonin.jpg' },
   { id: 15, name: 'Spirulina Tablets', category: 'immunity', price: 'Tsh 95,000', desc_en: 'What it does: Nutrient-dense algae that supports immunity, energy and detox. Who it is for: People needing a nutrient boost, vegetarians, and those recovering from illness.', desc_sw: 'Inafanya nini: Algae yenye lishe nyingi inayounga mkono kinga, nishati na kusafisha mwili. Kwa nani: Watu wanaohitaji kuongeza lishe, wanavyopendelea mboga au wanaorejea kutoka kwa ugonjwa.', img: 'images/spirulina-tab.jpg' },

  { id: 16, name: 'Soy Isoflavones', category: 'energy', price: 'Tsh 88,000', desc_en: 'What it does: Supports hormonal balance and women\'s health. Who it is for: Women seeking support during menopause or hormonal transitions.', desc_sw: 'Inafanya nini: Inasaidia uwiano wa homoni na afya ya wanawake. Kwa nani: Wanawake wanaotafuta msaada wakati wa menopause au mabadiliko ya homoni.', img: 'images/soy-isoflavones.jpg' },

   { id: 17, name: 'Soybean Soft Capsule', category: 'immunity', price: 'Tsh 80,000', desc_en: 'What it does: Provides plant-based nutrients and supports general wellbeing. Who it is for: People looking for a gentle, plant-sourced supplement.', desc_sw: 'Inafanya nini: Inatoa virutubisho vya plant-based na kuunga mkono ustawi wa jumla. Kwa nani: Watu wanaotaka lishe laini inayotokana na mimea.', img: 'images/soybean-soft-cap.jpg' },

    { id: 18, name: 'Whitening Soap', category: 'beauty', price: 'Tsh 25,000', desc_en: 'What it does: Cleanses and evens skin tone when used as directed. Who it is for: People seeking improved skin clarity and gentle brightening.', desc_sw: 'Inafanya nini: Inasafisha na kusawazisha rangi ya ngozi wakati inatumiwa ipasavyo. Kwa nani: Watu wanaotaka uwazi wa ngozi na nuru ya upole.', img: 'images/whitening-soap.jpg' },

    { id: 19, name: 'Gano Extract', category: 'immunity', price: 'Tsh 120,000', desc_en: 'What it does: Mushroom extract traditionally used to support immunity and overall wellbeing. Who it is for: Adults seeking immune support and natural adaptogens.', desc_sw: 'Inafanya nini: Dondoo za uyoga zinazotumika kuimarisha kinga na ustawi kwa ujumla. Kwa nani: Watu wazima wanaotaka msaada wa kinga na adaptogens za asili.', img: 'images/broken-gano.jpg' },

    { id: 20, name: 'Calcium Capsule', category: 'immunity', price: 'Tsh 70,000', desc_en: 'What it does: Supplies calcium to support bones and muscle function. Who it is for: Children, older adults, and people needing bone health support.', desc_sw: 'Inafanya nini: Inatoa kalsiamu kusaidia mifupa na kazi za misuli. Kwa nani: Watoto, wazee, na watu wanaohitaji msaada wa mifupa.', img: 'images/calcium-cap.jpg' },

    { id: 21, name: 'Energy Cup', category: 'energy', price: 'Tsh 30,000', desc_en: 'What it does: Ready-to-drink herbal cup to boost energy and alertness. Who it is for: Busy adults, students, and people needing a safe afternoon lift.', desc_sw: 'Inafanya nini: Kikombe tayari cha mimea kuongeza nishati na umakini. Kwa nani: Watu wafanyakazi, wanafunzi, na wale wanaohitaji msukumo wa mchana.', img: 'images/energy-cup.jpg' },

    { id: 22, name: 'Vitamin E (Natural)', category: 'beauty', price: 'Tsh 50,000', desc_en: 'What it does: Supports skin health and antioxidant protection. Who it is for: People wanting to support skin moisture and reduce oxidative stress.', desc_sw: 'Inafanya nini: Inasaidia afya ya ngozi na ulinzi wa antioxidant. Kwa nani: Watu wanaotaka kusaidia unyevu wa ngozi na kupunguza msukosuko wa oksidi.', img: 'images/matural-Vitamin-E.png' },

    { id: 23, name: 'Toilet Soap (Herbal)', category: 'beauty', price: 'Tsh 12,000', desc_en: 'What it does: Cleansing soap with herbal extracts for gentle care. Who it is for: People looking for everyday cleansing and mild skin care.', desc_sw: 'Inafanya nini: Sabuni ya kusafisha yenye dondoo za mimea kwa utunzaji laini. Kwa nani: Watu wanaotafuta usafi wa kila siku na utunzaji laini wa ngozi.', img: 'images/toilet-soap.png' },

  { id: 24, name: 'Eternal Toothpaste', category: 'oral care', price: 'Tsh 15,000', desc_en: 'What it does: Cleans teeth, helps remove plaque, freshens breath, and supports gum health with gentle herbal extracts. Who it is for: People looking for a natural daily oral-care paste suitable for everyday use.', desc_sw: 'Inafanya nini: Inasafisha meno, husaidia kuondoa plaque, hupatia pumzi safi, na kuunga mkono afya ya fizi kwa dondoo laini za mimea. Kwa nani: Watu wanaotafuta toothpaste ya asili kwa matumizi ya kila siku.', img: 'images/toothpaste.jpeg' }
  ];

    const productGrid = document.getElementById('productGrid');
    const searchInput = document.getElementById('searchInput');
    const categoryFilter = document.getElementById('categoryFilter');

    function renderProducts(list) {
      productGrid.innerHTML = '';
      if (!list.length) {
        productGrid.innerHTML = '<div class="col-span-3 p-6 bg-white rounded shadow">No products match your search.</div>';
        return;
      }
      list.forEach(p => {
        const card = document.createElement('div');
        card.className = 'bg-white rounded-lg shadow overflow-hidden';
  const waHref = 'https://api.whatsapp.com/send?phone=255692538955&text=' + encodeURIComponent(getWhatsAppPrefill(p));
        // Localized labels for action buttons
        const lang = getCurrentLang();
        const orderLabel = (lang === 'sw') ? 'Agiza kwenye WhatsApp' : 'Order on WhatsApp';
        const readLabel = (lang === 'sw') ? 'Soma zaidi' : 'Read more';
        // Format the short card description with bolded headings (safe-escaped)
        const rawDesc = getProductDesc(p) || '';
        let descHtml = '';
        if(lang === 'sw'){
          const headingA = 'Inafanya nini:';
          const headingB = 'Kwa nani:';
          if(rawDesc.includes(headingB)){
            const parts = rawDesc.split(headingB);
            const aPart = parts[0].replace(headingA,'').trim();
            const bPart = parts.slice(1).join(headingB).trim();
            descHtml = `<strong>${headingA}</strong> ${escapeHtml(aPart)}<br><strong>${headingB}</strong> ${escapeHtml(bPart)}`;
          } else if(rawDesc.includes(headingA)){
            const aPart = rawDesc.replace(headingA,'').trim();
            descHtml = `<strong>${headingA}</strong> ${escapeHtml(aPart)}`;
          } else {
            descHtml = escapeHtml(rawDesc);
          }
        } else {
          const headingA = 'What it does:';
          const headingB = 'Who it is for:';
          if(rawDesc.includes(headingB)){
            const parts = rawDesc.split(headingB);
            const aPart = parts[0].replace(headingA,'').trim();
            const bPart = parts.slice(1).join(headingB).trim();
            descHtml = `<strong>${headingA}</strong> ${escapeHtml(aPart)}<br><strong>${headingB}</strong> ${escapeHtml(bPart)}`;
          } else if(rawDesc.includes(headingA)){
            const aPart = rawDesc.replace(headingA,'').trim();
            descHtml = `<strong>${headingA}</strong> ${escapeHtml(aPart)}`;
          } else {
            descHtml = escapeHtml(rawDesc);
          }
        }
        card.innerHTML = `
          <img src="${p.img}" alt="${p.name}" class="w-full product-img" />
    <div class="p-4">
            <div class="flex items-center justify-between">
              <h4 class="font-semibold text-green-800">${p.name}</h4>
              <span class="text-sm font-medium text-gray-600">${p.price}</span>
            </div>
          <p class="text-sm text-gray-600 mt-2 line-clamp-2">${descHtml}</p>
            <div class="mt-3 flex gap-2">
              <a href="${waHref}" class="flex-1 inline-block text-center px-3 py-2 border rounded-md">${orderLabel}</a>
              <button class="px-3 py-2 bg-gray-100 text-green-700 rounded-md" onclick="showProductDetails(${p.id})">${readLabel}</button>
            </div>
          </div>
        `;
        productGrid.appendChild(card);
      });
    }

    function normalize(text) { return (text||'').toString().toLowerCase(); }

    function filterProducts() {
      const q = normalize(searchInput.value);
      const cat = categoryFilter.value;
      const filtered = products.filter(p => {
        const desc = getProductDesc(p);
        const matchQ = normalize(p.name).includes(q) || normalize(desc).includes(q) || normalize(p.category).includes(q);
        const matchCat = (cat === 'all') || (p.category === cat);
        return matchQ && matchCat;
      });
      renderProducts(filtered);
    }

    renderProducts(products);

    searchInput.addEventListener('input', filterProducts);
    categoryFilter.addEventListener('change', filterProducts);

    const cart = [];
    function addToCart(id) {
      const p = products.find(x => x.id === id);
      if (!p) return;
      cart.push(p);
      alert(p.name + ' added to cart. Cart size: ' + cart.length);
    }

    document.getElementById('contactForm').addEventListener('submit', function(e){
      e.preventDefault();
      const name = this.elements['name']?.value || '';
      const phone = this.elements['phone']?.value || '';
      const email = this.elements['email']?.value || '';
      const message = this.elements['message']?.value || '';
      const statusEl = document.getElementById('formStatus');
      statusEl.textContent = 'Opening WhatsApp...';

      // Prepare submission object and save to localStorage (temporary admin store)
      const submission = {
        id: Date.now(),
        name: name,
        phone: phone,
        email: email,
        message: message,
        method: 'whatsapp',
        status: 'pending',
        createdAt: new Date().toISOString()
      };
      saveSubmission(submission);

      // Build WhatsApp prefilled message and open
      const header = (getCurrentLang() === 'sw') ? '*Ombi la Kuwasiliana na Afya Asilia:*' : '*Afya Asilia contact request:*';
      const lines = [header, `Name: ${name}`, `Phone: ${phone}`, `Email: ${email}`, '', 'Message:', message];
      const waText = lines.join('\n');
      const waHref = 'https://api.whatsapp.com/send?phone=255692538955&text=' + encodeURIComponent(waText);
      // open in new tab/window so user can send from their WhatsApp
      window.open(waHref, '_blank');
      updateSubmission(submission.id, { status: 'whatsapp_opened' });

      setTimeout(()=>{
        statusEl.textContent = 'WhatsApp opened. Please send the message from your WhatsApp app.';
        document.getElementById('contactForm').reset();
      }, 800);
    });

    // Language switcher
    const langSwitcher = document.getElementById('langSwitcher');
    // Load saved language preference (if any) and apply before attaching listener
    try {
      const savedLang = localStorage.getItem('afya_lang');
      if (savedLang) langSwitcher.value = savedLang;
      else langSwitcher.value = 'sw';
    } catch (e) {
      /* localStorage may be unavailable in some environments; ignore */
    }

    langSwitcher.addEventListener('change', function(){
      if(this.value === 'sw') {
        document.getElementById('heroTitle').textContent = 'Karibu Afya Asilia';
        document.getElementById('heroDesc').textContent = 'Virutubisho asilia kutoka Eternal International. Gundua suluhisho la asili kwa kudhibiti uzito, kusafisha mwili, kuimarisha kinga na ustawi wa kila siku.';
        document.getElementById('shopBtn').textContent = 'Nunua Bidhaa';
        document.getElementById('contactBtn').textContent = 'Wasiliana Nasi';
        // Header localization - Swahili
        const siteTitle = document.getElementById('siteTitle'); if(siteTitle) siteTitle.textContent = 'Afya Asilia';
        const siteTag = document.getElementById('siteTag'); if(siteTag) siteTag.textContent = 'Afya ya asili • Bidhaa halali za Eternal International';
        ['navAbout','navWhat','navProducts','navContact','mobileAbout','mobileWhat','mobileProducts','mobileContact'].forEach(id=>{
          const el = document.getElementById(id); if(!el) return; 
          if(id.toLowerCase().includes('about')) el.textContent = 'Kuhusu';
          else if(id.toLowerCase().includes('what')) el.textContent = 'Tunafanya Nini';
          else if(id.toLowerCase().includes('products')) el.textContent = 'Bidhaa';
          else if(id.toLowerCase().includes('contact')) el.textContent = 'Wasiliana';
        });
        const headerOrder = document.getElementById('headerOrderBtn'); if(headerOrder) headerOrder.textContent = 'Agiza kwenye WhatsApp';
  document.getElementById('aboutTitle').textContent = 'Kuhusu Afya Asilia';
  document.getElementById('aboutDesc').textContent = `Afya Asilia ni jukwaa mtandaoni la kuaminika lililojitolea kukuza ustawi wa asili, maisha yenye afya, na virutubisho vya ubora wa juu. Tunaamini afya ya kweli inaanza na asili, na dhamira yetu ni kuwasaidia watu kubadilisha maisha yao kupitia bidhaa za ustawi ambazo ni salama, zenye ufanisi na zinaungwa mkono na tafiti.

Kama mshirika rasmi wa mauzo wa Eternal International, tunatoa upatikanaji wa kuaminika wa bidhaa za mimea za kiwango cha juu zilizoundwa kusaidia kupunguza uzito, kusafisha mwili, kuimarisha mfumo wa kinga, kusawazisha nishati, na kuboresha afya kwa ujumla. Lengo letu ni kuwawezesha familia na jumuiya kwa suluhisho za asili zinazoongeza afya ya kila siku na ustawi wa muda mrefu.

Katika Afya Asilia, tumejitolea kwa uwazi, kuridhika kwa wateja, na mwongozo wa kweli. Tunahakikisha kila mteja anapata bidhaa halisi, maelekezo sahihi ya matumizi, na msaada endelevu katika safari yao ya ustawi. Afya yako ndiyo kipaumbele chetu.`;
        document.getElementById('productsTitle').textContent = 'Bidhaa Zetu';
        document.getElementById('contactTitle').textContent = 'Wasiliana / Agiza';
        document.getElementById('contactDesc').textContent = 'Jaza fomu au tumia WhatsApp kuweka oda. Tutajibu ndani ya masaa machache.';
  // Localize placeholders
  const search = document.getElementById('searchInput');
  if (search) search.placeholder = 'Tafuta bidhaa, kategoria, maelezo...';
  const nameInput = document.querySelector('input[name="name"]');
  if (nameInput) nameInput.placeholder = 'Jina lako';
  const phoneInput = document.querySelector('input[name="phone"]');
  if (phoneInput) phoneInput.placeholder = 'Simu (k.m. +255...)';
  const emailInput = document.querySelector('input[name="email"]');
  if (emailInput) emailInput.placeholder = 'Barua pepe (hiari)';
  const msgInput = document.querySelector('textarea[name="message"]');
  if (msgInput) msgInput.placeholder = 'Ujumbe / Maelezo ya oda';
        // What we do - Swahili
        document.getElementById('what1Title').textContent = 'Sambaza Bidhaa Halali';
        document.getElementById('what1Desc').textContent = 'Tunachukua bidhaa halisi za Eternal International na kuhakikisha ubora na uhifadhi sahihi.';
        document.getElementById('what2Title').textContent = 'Mwongozo Binafsi';
        document.getElementById('what2Desc').textContent = 'Tunakusaidia kuchagua ratiba inayofaa kwa malengo yako — kupunguza uzito, kusafisha mwili au kuongeza kinga.';
        document.getElementById('what3Title').textContent = 'Uwasilishaji Haraka & Msaada';
        document.getElementById('what3Desc').textContent = 'Uwasilishaji wa ndani, chaguzi za usafirishaji kitaifa, na msaada baada ya mauzo.';
  // Footer localization - Swahili
  document.getElementById('footerContactTitle').textContent = 'Wasiliana Nasi';
  document.getElementById('footerPhone').textContent = 'Simu/WhatsApp: +255 692 538 955';
  document.getElementById('footerEmail').textContent = 'Barua pepe: afyaasilia@gmail.com';
  document.getElementById('footerFacebook').innerHTML = '<a href="https://web.facebook.com/profile.php?id=61583949610077" class="underline">Facebook: Afya Asilia</a>';
  document.getElementById('footerInstagram').innerHTML = '<a href="#" class="underline">Instagram: afya_asilia</a>';
  document.getElementById('footerLocationTitle').textContent = 'Mahali';
  document.getElementById('footerLocationText').textContent = 'Tanzania, Afrika Mashariki';
  document.getElementById('footerCopyright').textContent = '© Afya Asilia — Mshirika rasmi wa Eternal International';
      } else {
        document.getElementById('heroTitle').textContent = 'Welcome to Afya Asilia';
        document.getElementById('heroDesc').textContent = 'Authentic herbal supplements from Eternal International. Discover natural solutions for weight management, detoxification, immunity support and everyday wellbeing.';
  document.getElementById('shopBtn').textContent = 'Shop Products';
  document.getElementById('contactBtn').textContent = 'Contact Us';
  // Header localization - English
  const siteTitleEn = document.getElementById('siteTitle'); if(siteTitleEn) siteTitleEn.textContent = 'Afya Asilia';
  const siteTagEn = document.getElementById('siteTag'); if(siteTagEn) siteTagEn.textContent = 'Natural wellness • Authentic Eternal International products';
  const headerIds = ['navAbout','navWhat','navProducts','navContact','mobileAbout','mobileWhat','mobileProducts','mobileContact'];
  headerIds.forEach(id=>{ const el = document.getElementById(id); if(!el) return; if(id.toLowerCase().includes('about')) el.textContent = 'About'; else if(id.toLowerCase().includes('what')) el.textContent = 'What we do'; else if(id.toLowerCase().includes('products')) el.textContent = 'Products'; else if(id.toLowerCase().includes('contact')) el.textContent = 'Contact'; });
  const headerOrderEn = document.getElementById('headerOrderBtn'); if(headerOrderEn) headerOrderEn.textContent = 'Order on WhatsApp';
  document.getElementById('aboutTitle').textContent = 'About Afya Asilia';
  document.getElementById('aboutDesc').textContent = 'Afya Asilia is a trusted online platform dedicated to promoting natural wellness, healthy living, and high-quality nutritional supplements. We believe that true health begins with nature, and our mission is to help individuals transform their lives through safe, effective, and science-supported wellness products.\n\nAs an authorized <b>Eternal International</b> sales partner, we provide reliable access to premium herbal products designed to support weight loss, detoxification, immune health, energy balance, and overall body wellness. Our goal is to empower families and communities with natural solutions that improve daily health and long-term wellbeing.\n\nAt Afya Asilia, we are committed to transparency, customer satisfaction, and honest guidance. We ensure that every customer receives genuine products, correct usage instructions, and ongoing support on their wellness journey. Your health is our priority.';
        document.getElementById('productsTitle').textContent = 'Our Products';
        document.getElementById('contactTitle').textContent = 'Get in touch / Order';
        document.getElementById('contactDesc').textContent = 'Fill the form or use WhatsApp to place your order. We will reply within a few hours.';
  // Localize placeholders (English)
  const searchEn = document.getElementById('searchInput');
  if (searchEn) searchEn.placeholder = 'Search products, categories, descriptions...';
  const nameInputEn = document.querySelector('input[name="name"]');
  if (nameInputEn) nameInputEn.placeholder = 'Your name';
  const phoneInputEn = document.querySelector('input[name="phone"]');
  if (phoneInputEn) phoneInputEn.placeholder = 'Phone (e.g. +255...)';
  const emailInputEn = document.querySelector('input[name="email"]');
  if (emailInputEn) emailInputEn.placeholder = 'Email (optional)';
  const msgInputEn = document.querySelector('textarea[name="message"]');
  if (msgInputEn) msgInputEn.placeholder = 'Message / Order details';
        // What we do - English
        document.getElementById('what1Title').textContent = 'Supply Authentic Products';
        document.getElementById('what1Desc').textContent = 'We source original Eternal International supplements and ensure product authenticity and correct handling.';
        document.getElementById('what2Title').textContent = 'Personalized Guidance';
        document.getElementById('what2Desc').textContent = 'We help you pick the right regimen for your goals — weight loss, detox, or immune support.';
        document.getElementById('what3Title').textContent = 'Fast Delivery & Support';
        document.getElementById('what3Desc').textContent = 'Local delivery, nationwide shipping options, and after-sale support to track progress and answer questions.';
  // Footer localization - English
  document.getElementById('footerContactTitle').textContent = 'Contact Us';
  document.getElementById('footerPhone').textContent = 'Phone/WhatsApp: +255 692 538 955';
  document.getElementById('footerEmail').textContent = 'Email: afyaasilia@gmail.com';
  document.getElementById('footerFacebook').innerHTML = '<a href="https://web.facebook.com/profile.php?id=61583949610077" class="underline">Facebook: Afya Asilia</a>';
  document.getElementById('footerInstagram').innerHTML = '<a href="#" class="underline">Instagram: afya_asilia</a>';
  document.getElementById('footerLocationTitle').textContent = 'Location';
  document.getElementById('footerLocationText').textContent = 'Tanzania, East Africa';
  document.getElementById('footerCopyright').textContent = '© Afya Asilia — Authorized Eternal International Partner';
      }
      // Re-render products so descriptions update for the selected language
      filterProducts();
      // Persist user choice
      try { localStorage.setItem('afya_lang', this.value); } catch (e) {}
    });
    // Apply the selected language on initial load (so saved/default language becomes active)
    langSwitcher.dispatchEvent(new Event('change'));

    // Initialize top auto-scroll advertisements (uses `products` array)
    (function initTopAds(){
      const adContainer = document.getElementById('topAds');
      if(!adContainer || !window.products || !products.length) return;
      const ads = products.slice(0, Math.min(6, products.length));
      let idx = 0;
      const imgEl = document.getElementById('topAdImg');
      const titleEl = document.getElementById('topAdTitle');
      const descEl = document.getElementById('topAdDesc');
      if(!imgEl || !titleEl || !descEl) return;

      function show(i){
        const p = ads[i];
        if(!p) return;
        imgEl.classList.remove('top-ad-visible'); imgEl.classList.add('top-ad-hidden');
        setTimeout(()=>{
          imgEl.src = p.img;
          imgEl.alt = p.name;
          titleEl.textContent = p.name;
          // short description (single-line, readable)
          const raw = (getProductDesc(p) || '').replace(/\n+/g,' ').trim();
          descEl.textContent = raw.length>160 ? raw.slice(0,157)+'…' : raw;
          imgEl.classList.remove('top-ad-hidden'); imgEl.classList.add('top-ad-visible');
        }, 120);
      }

      let timer = null;
      function start(){ if(timer) return; timer = setInterval(()=>{ idx = (idx+1) % ads.length; show(idx); }, 4500); }
      function stop(){ if(timer){ clearInterval(timer); timer = null; } }

      const prev = document.getElementById('topAdPrev');
      const next = document.getElementById('topAdNext');
      if(prev) prev.addEventListener('click', function(){ stop(); idx = (idx-1+ads.length)%ads.length; show(idx); start(); });
      if(next) next.addEventListener('click', function(){ stop(); idx = (idx+1)%ads.length; show(idx); start(); });

      adContainer.addEventListener('mouseenter', stop);
      adContainer.addEventListener('mouseleave', start);

      // update when language changes
      document.getElementById('langSwitcher').addEventListener('change', function(){ show(idx); });

      show(0);
      start();
    })();
    // Mobile menu toggle behavior
    (function(){
      const menuBtn = document.getElementById('menuBtn');
      const mobileNav = document.getElementById('mobileNav');
      const menuIcon = document.getElementById('menuIcon');
      const closeIcon = document.getElementById('closeIcon');
      if (!menuBtn || !mobileNav) return;

      function setOpen(open){
        if(open){
          mobileNav.classList.remove('hidden');
          menuBtn.setAttribute('aria-expanded','true');
          menuIcon.classList.add('hidden');
          closeIcon.classList.remove('hidden');
        } else {
          mobileNav.classList.add('hidden');
          menuBtn.setAttribute('aria-expanded','false');
          menuIcon.classList.remove('hidden');
          closeIcon.classList.add('hidden');
        }
      }

      menuBtn.addEventListener('click', function(e){
        const isOpen = menuBtn.getAttribute('aria-expanded') === 'true';
        setOpen(!isOpen);
      });

      // Close when clicking a link inside mobile nav
      mobileNav.addEventListener('click', function(e){
        if(e.target && e.target.tagName === 'A') setOpen(false);
      });

      // Close when clicking outside the mobile nav
      document.addEventListener('click', function(e){
        if(!mobileNav.classList.contains('hidden')){
          const withinMenu = mobileNav.contains(e.target) || menuBtn.contains(e.target);
          if(!withinMenu) setOpen(false);
        }
      });

      // Close mobile menu when resizing to desktop widths
      window.addEventListener('resize', function(){
        if(window.innerWidth >= 768) setOpen(false);
      });
    })();

    // Theme toggle: apply saved theme or system preference
    (function initTheme(){
      const toggle = document.getElementById('themeToggle');
      const visual = document.getElementById('themeToggleVisual');
      const knob = visual && visual.querySelector('span');
      const label = document.getElementById('themeToggleLabel');
      const body = document.body;
      if(!toggle || !visual) return;

      function applyTheme(theme){
        if(theme === 'dark'){
          body.classList.add('dark');
          toggle.checked = true;
          if(label) label.textContent = (getCurrentLang()==='sw') ? 'Giza' : 'Dark';
          if(knob) knob.style.transform = 'translateX(16px)';
          visual.style.background = '#1f2937';
        } else {
          body.classList.remove('dark');
          toggle.checked = false;
          if(label) label.textContent = (getCurrentLang()==='sw') ? 'Mwangaza' : 'Light';
          if(knob) knob.style.transform = 'translateX(0)';
          visual.style.background = '#ffffff';
        }
      }

      // Load saved theme, else use prefers-color-scheme
      let saved = null;
      try{ saved = localStorage.getItem('afya_theme'); }catch(e){}
      if(!saved){
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        saved = prefersDark ? 'dark' : 'light';
      }
      applyTheme(saved);

      toggle.addEventListener('change', function(){
        const theme = this.checked ? 'dark' : 'light';
        try{ localStorage.setItem('afya_theme', theme); }catch(e){}
        applyTheme(theme);
      });

      // Update label when language changes
      document.getElementById('langSwitcher').addEventListener('change', function(){
        const isDark = document.body.classList.contains('dark');
        if(label) label.textContent = isDark ? ((this.value==='sw') ? 'Giza' : 'Dark') : ((this.value==='sw') ? 'Mwangaza' : 'Light');
      });
    })();

    // Make header and top advertisement fixed and adjust content padding
    (function fixHeaderAds(){
      const header = document.getElementById('siteHeader');
      const ads = document.getElementById('topAds');
      if(!header) return;

      function updatePositions(){
        // ensure header is fixed
        header.classList.add('site-fixed');

        // if ads exist, fix it below header
        if(ads){
          ads.classList.add('top-fixed');
          // position ads directly below header
          ads.style.top = header.offsetHeight + 'px';
        }

        // add body padding equal to total fixed height so page content isn't hidden
        const adsHeight = ads ? ads.offsetHeight : 0;
        document.body.style.paddingTop = (header.offsetHeight + adsHeight) + 'px';
      }

      // run after a short delay to allow fonts/images to load and layout stabilise
      setTimeout(updatePositions, 80);
      // also update on resize and when images load
      window.addEventListener('resize', updatePositions);
      window.addEventListener('load', updatePositions);
    })();
  </script>
  <!-- EmailJS SDK (optional) -->
  <script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script>
    // EmailJS configuration - fill these values to enable direct email sending
    const EMAILJS_ENABLED = false; // set to true after configuring the IDs below
    const EMAILJS_SERVICE_ID = 'your_service_id';
    const EMAILJS_TEMPLATE_ID = 'your_template_id';
    const EMAILJS_PUBLIC_KEY = 'your_public_key';

    if (EMAILJS_ENABLED && window.emailjs && EMAILJS_PUBLIC_KEY) {
      try { emailjs.init(EMAILJS_PUBLIC_KEY); } catch (e) { /* ignore init errors */ }
    }
  </script>
  <!-- Admin modal + localStorage submissions UI -->
  <div id="adminModal" class="hidden fixed inset-0 z-50 flex items-start justify-center pt-20 px-4">
    <div class="absolute inset-0 bg-black bg-opacity-50" onclick="closeAdminModal()"></div>
    <div class="bg-white rounded-lg shadow-lg max-w-4xl w-full z-10 overflow-auto">
      <div class="p-4 flex items-center justify-between border-b">
        <h3 class="font-semibold">Admin — Contact Submissions</h3>
        <div class="flex gap-2">
          <button id="exportCsvBtn" class="px-3 py-1 border rounded">Export CSV</button>
          <button id="clearSubmissionsBtn" class="px-3 py-1 border rounded text-red-600">Clear All</button>
          <button onclick="closeAdminModal()" class="px-3 py-1 border rounded">Close</button>
        </div>
      </div>
      <div class="p-4">
        <table id="submissionsTable" class="w-full text-sm">
          <thead class="text-left text-gray-700"><tr><th>Date</th><th>Name</th><th>Phone</th><th>Email</th><th>Message</th><th>Method</th><th>Status</th><th>Action</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    const SUBMISSIONS_KEY = 'afya_submissions';

    function loadSubmissions(){
      try { return JSON.parse(localStorage.getItem(SUBMISSIONS_KEY) || '[]'); } catch(e){ return []; }
    }
    function saveSubmission(obj){
      const arr = loadSubmissions();
      arr.push(obj);
      try { localStorage.setItem(SUBMISSIONS_KEY, JSON.stringify(arr)); } catch(e){}
    }
    function updateSubmission(id, patch){
      const arr = loadSubmissions();
      const i = arr.findIndex(x=>x.id===id);
      if(i===-1) return;
      arr[i] = Object.assign({}, arr[i], patch);
      try { localStorage.setItem(SUBMISSIONS_KEY, JSON.stringify(arr)); } catch(e){}
    }
    function clearSubmissions(){ localStorage.removeItem(SUBMISSIONS_KEY); renderSubmissions(); }

    function renderSubmissions(){
      const tbody = document.querySelector('#submissionsTable tbody');
      tbody.innerHTML = '';
      const arr = loadSubmissions().slice().reverse();
      if(!arr.length){ tbody.innerHTML = '<tr><td colspan="8" class="p-4">No submissions</td></tr>'; return; }
      arr.forEach(s=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td class="align-top p-2">${new Date(s.createdAt).toLocaleString()}</td>
          <td class="align-top p-2">${escapeHtml(s.name)}</td>
          <td class="align-top p-2">${escapeHtml(s.phone)}</td>
          <td class="align-top p-2">${escapeHtml(s.email)}</td>
          <td class="align-top p-2">${escapeHtml((s.message||'').slice(0,120))}${(s.message||'').length>120? '…':''}</td>
          <td class="align-top p-2">${escapeHtml(s.method||'')}</td>
          <td class="align-top p-2">${escapeHtml(s.status||'')}</td>
          <td class="align-top p-2"><button data-id="${s.id}" class="viewBtn px-2 py-1 border rounded">View</button> <button data-id="${s.id}" class="delBtn px-2 py-1 border rounded text-red-600">Delete</button></td>
        `;
        tbody.appendChild(tr);
      });
      // attach view/delete handlers
      tbody.querySelectorAll('.viewBtn').forEach(b=>b.addEventListener('click', e=>{ const id=Number(e.currentTarget.dataset.id); const s=loadSubmissions().find(x=>x.id===id); if(!s) return; alert(`Name: ${s.name}\nPhone: ${s.phone}\nEmail: ${s.email}\n\nMessage:\n${s.message}`); }));
      tbody.querySelectorAll('.delBtn').forEach(b=>b.addEventListener('click', e=>{ const id=Number(e.currentTarget.dataset.id); const arr=loadSubmissions().filter(x=>x.id!==id); localStorage.setItem(SUBMISSIONS_KEY, JSON.stringify(arr)); renderSubmissions(); }));
    }

    function exportCsv(){
      const arr = loadSubmissions();
      if(!arr.length) return alert('No submissions to export');
      const headers = ['id','createdAt','name','phone','email','message','method','status'];
      const rows = arr.map(r => headers.map(h=>`"${String(r[h]||'').replace(/"/g,'""')}"`).join(','));
      const csv = [headers.join(','), ...rows].join('\r\n');
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'afya_submissions.csv'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    }

    // Admin modal controls
    function openAdminModal(){ document.getElementById('adminModal').classList.remove('hidden'); renderSubmissions(); }
    function closeAdminModal(){ document.getElementById('adminModal').classList.add('hidden'); }

    // add footer admin link dynamically so it is easy to remove later
    (function addAdminLink(){
      try{
        const footer = document.querySelector('footer .max-w-6xl');
        if(!footer) return;
        const adminLink = document.createElement('p');
        adminLink.innerHTML = '<a id="adminOpen" href="#" class="underline">View your Message</a>';
        footer.appendChild(adminLink);
        document.getElementById('adminOpen').addEventListener('click', function(e){ e.preventDefault(); openAdminModal(); });
        document.getElementById('exportCsvBtn').addEventListener('click', exportCsv);
        document.getElementById('clearSubmissionsBtn').addEventListener('click', function(){ if(confirm('Clear all submissions?')) clearSubmissions(); });
      } catch(e){}
    })();
  </script>
</body>
</html>
